<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>Skilled-Jobs English (Managers) — Reading & Writing Tests</title>
  <style>
    :root{font-family:Inter, system-ui, -apple-system, 'Segoe UI', Roboto, Arial;}
    body{max-width:1000px;margin:28px auto;padding:20px;line-height:1.45;color:#111;background:#fff}
    header{display:flex;align-items:center;gap:16px;justify-content:space-between}
    h1{font-size:1.5rem;margin:0}
    .name-field{font-size:1rem;border:1px solid #cbd5e1;border-radius:8px;padding:6px;width:250px}
    .level{border:1px solid #e2e8f0;border-radius:10px;padding:16px;margin:18px 0;background:#fbfdff}
    h2{margin-top:0}
    .passage{background:#fff;padding:12px;border-radius:8px;border:1px solid #eef2f7;margin-bottom:12px}
    .question{margin:10px 0;padding:10px;border-left:3px solid #c7d2fe;background:#fcfcff;border-radius:6px}
    label{display:block;cursor:pointer}
    .short-answer{width:100%;min-height:48px;padding:8px;border:1px solid #e2e8f0;border-radius:6px}
    button{background:#2563eb;color:#fff;border:none;padding:8px 12px;border-radius:8px;cursor:pointer}
    .controls{display:flex;gap:8px;flex-wrap:wrap;margin-top:10px}
    .result{margin-top:10px;padding:10px;border-radius:8px;background:#f8fafc;border:1px solid #e6eef8}
    textarea{width:100%;min-height:140px;padding:8px;border-radius:8px;border:1px solid #e6eef8}
    footer{margin-top:28px;font-size:0.9rem;color:#475569}
  </style>
</head>
<body>
  <header>
    <h1>Skilled-Jobs English (Managers) — Reading & Writing</h1>
    <div>
      <label><strong>Candidate Name:</strong></label>
      <input class="name-field" type="text" id="candidateName" placeholder="Write your full name here">
    </div>
  </header>

  <p><strong>Instructions:</strong> Complete all sections, then click <em>Export Results to PDF</em>. The file will be saved to your device for sending via email or Messenger.</p>

  <!-- Reading -->
  <section class="level">
    <h2>A1 Reading Test</h2>
    <div class="passage">John works at a factory. Every day, he wears his safety gloves, boots, goggles, and helmet before welding. He likes his job because he assembles things with his hands.</div>
    <div class="question"><label>1. What is John's job?</label><input class="short-answer" id="a1q1"></div>
    <div class="question"><label>2. Why does he wear gloves?</label><input class="short-answer" id="a1q2"></div>
    <div class="controls"><button id="btnA1">Submit A1 Test</button></div>
    <div class="result" id="resultA1"></div>
  </section>

  <section class="level">
    <h2>A2 Reading Test</h2>
    <div class="passage">Maria is a pastry cook in a hotel kitchen. She starts work at 6 a.m. in Western Australia. She prepares dough and bakes bread and cakes for guests. She enjoys learning new recipes from her coworkers.</div>
    <div class="question"><label>1. Where does Maria work?</label><input class="short-answer" id="a2q1"></div>
    <div class="question"><label>2. What does Maria enjoy at work?</label><input class="short-answer" id="a2q2"></div>
    <div class="controls"><button id="btnA2">Submit A2 Test</button></div>
    <div class="result" id="resultA2"></div>
  </section>

  <section class="level">
    <h2>B1 Reading Test</h2>
    <div class="passage">Liam is a construction site supervisor. His team builds new houses. On a daily basis, he checks safety rules, assigns workers, and ensures equipment is working properly. Good communication is very important in his job.</div>
    <div class="question"><label>1. What does Liam do everyday?</label><input class="short-answer" id="b1q1"></div>
    <div class="question"><label>2. Why is communication important in his job?</label><input class="short-answer" id="b1q2"></div>
    <div class="controls"><button id="btnB1">Submit B1 Test</button></div>
    <div class="result" id="resultB1"></div>
  </section>

  <!-- Writing -->
  <section class="level">
    <h2>Writing Task: Short Essay</h2>
    <p>Write your idea about this topic: <strong>why safety is important in your job</strong>. Write at least 80 words.</p>
    <textarea id="essay"></textarea>
    <div class="controls"><button id="btnEssay">Submit Essay</button></div>
    <div class="result" id="resultEssay"></div>
  </section>

  <section class="level">
    <h2>Writing Task: Email</h2>
    <p>Write an email to your manager to request one day off because you have a personal appointment. Be polite and include the reason and the date.</p>
    <textarea id="email"></textarea>
    <div class="controls"><button id="btnEmail">Submit Email</button></div>
    <div class="result" id="resultEmail"></div>
  </section>

  <footer>
    <button id="btnExportPDF">Export Results to PDF</button>
  </footer>

  <!-- ✅ jsPDF -->
  <script src="https://cdnjs.cloudflare.com/ajax/libs/jspdf/2.5.1/jspdf.umd.min.js"></script>

  <script>
  document.addEventListener('DOMContentLoaded',()=>{
    const { jsPDF } = window.jspdf;

    const wordsCount=s=>s.trim().split(/\s+/).filter(Boolean).length;
    const normalize=s=>String(s||'').trim().toLowerCase();

    // Reading scorers
    const scoreA1=()=> (normalize(a1q1.value).includes('welder')?1:0) + (normalize(a1q2.value).includes('safety')||normalize(a1q2.value).includes('because')?1:0);
    const scoreA2=()=> (normalize(a2q1.value).includes('Australia')?1:0) + (normalize(a2q2.value).includes('learning')?1:0); 
    const scoreB1=()=> (normalize(b1q1.value).includes('checks')||normalize(b1q1.value).includes('assigns')?1:0)
                    + (normalize(b1q2.value).includes('communication')||normalize(b1q2.value).includes('team')?1:0);

    // Display results
    document.getElementById('btnA1').onclick=()=>resultA1.innerHTML=`<strong>Score:</strong> ${scoreA1()}`;
    document.getElementById('btnA2').onclick=()=>resultA2.innerHTML=`<strong>Score:</strong> ${scoreA2()}`;
    document.getElementById('btnB1').onclick=()=>resultB1.innerHTML=`<strong>Score:</strong> ${scoreB1()}`;

    // Writing
    document.getElementById('btnEssay').onclick=()=>{
      const wc=wordsCount(essay.value);
      resultEssay.innerHTML=`<strong>Word Count:</strong> ${wc}`;
    };
    document.getElementById('btnEmail').onclick=()=>{
      const wc=wordsCount(email.value);
      resultEmail.innerHTML=`<strong>Word Count:</strong> ${wc}`;
    };

    // Writing CEFR evaluator
    function writingLevel(w){
      if(w<60)return"Below A1";
      if(w<100)return"A1";
      if(w<150)return"A2";
      if(w<200)return"B1";
      if(w<250)return"B2";
      return"C1";
    }

    function highestReadingLevel(a1,a2,b1){
      const scores={A1:a1,A2:a2,B1:b1};
      let highest='A1',max=scores.A1;
      for(const lvl in scores){if(scores[lvl]>max){max=scores[lvl];highest=lvl;}}
      return highest;
    }

    // Export results to PDF (save, not print)
    document.getElementById('btnExportPDF').addEventListener('click',()=>{
      const name=document.getElementById('candidateName').value.trim()||'(No name)';
      const a1=scoreA1(),a2=scoreA2(),b1=scoreB1();
      const essayW=wordsCount(essay.value),emailW=wordsCount(email.value);
      const essayL=writingLevel(essayW),emailL=writingLevel(emailW);
      const readLevel=highestReadingLevel(a1,a2,b1);

      const doc=new jsPDF();
      let y=20;
      doc.setFontSize(16);
      doc.text(`Candidate: ${name}`,10,y);y+=10;

      doc.setFontSize(14);
      doc.text('Reading Comprehension',10,y);y+=8;
      doc.setFontSize(12);
      doc.text(`A1 Score: ${a1}/2`,10,y);y+=6;
      doc.text(`A2 Score: ${a2}/2`,10,y);y+=6;
      doc.text(`B1 Score: ${b1}/2`,10,y);y+=8;
      doc.text(`Highest Reading Level: ${readLevel}`,10,y);y+=12;

      doc.setFontSize(14);
      doc.text('Writing Results',10,y);y+=8;
      doc.setFontSize(12);
      doc.text(`Essay Word Count: ${essayW} → Level: ${essayL}`,10,y);y+=6;
      doc.text(`Email Word Count: ${emailW} → Level: ${emailL}`,10,y);y+=10;

      doc.setFontSize(14);
      doc.text('Overall Summary',10,y);y+=8;
      doc.setFontSize(12);
      doc.text(`Reading Level: ${readLevel}`,10,y);y+=6;
      doc.text(`Writing Level: ${essayL===emailL?essayL:essayL+'/'+emailL}`,10,y);y+=10;
      doc.text('End of Report',10,y);

      const filename=`${name.replace(/\s+/g,'_')||'Candidate'}_Managers_Results.pdf`;
      doc.save(filename);
    });
  });
  </script>
</body>
</html>







